import{_ as E,B as u,v as N,x as b,c as i,b as c,a as t,w,e as x,o as r,S as T,N as I,t as n,z as g,y as R,G as p,H as f,I as V,j as L,F as M,r as $,n as U,J as z,C as H,K as O,A as P}from"./index-DuGMpLGP.js";const F={class:"dashboard"},j={class:"main-content"},q={class:"content-grid",style:{"grid-template-columns":"1fr","margin-bottom":"40px"}},J={class:"card-header"},K={class:"card-title"},G={class:"form-grid"},W={class:"form-group-settings full-width"},Q={class:"form-group-settings"},X={class:"form-group-settings"},Y={class:"form-group-settings full-width"},Z={class:"btn-group",style:{"margin-top":"20px"}},tt=["disabled"],et={class:"content-grid",style:{"grid-template-columns":"1fr"}},st={class:"table-wrapper"},at={class:"data-table"},lt={class:"table-amount"},ot={class:"card-actions"},nt=["onClick"],dt=["onClick"],it={key:0},rt={__name:"AdminBilling",setup(ut){const k="ab75fd8de4edd01ad8978325ab8c2694e007fdd70fcbba6ef2257b74c8d8",S="seitb",A="55370_my_db",a=u({desc:"",amount:29,status:"paid",date:new Date().toISOString().slice(0,16)}),o=u(!1),v=u(null),m=u(!1),d=u({text:"",type:""}),h=H(()=>P.value.filter(l=>!String(l.id).startsWith("m")));N(()=>{b()});const C=l=>{o.value=!0,v.value=l.id,a.value={desc:l.desc,amount:parseFloat(l.amount.replace("$","")),status:l.status.toLowerCase(),date:l.date.replace(" ","T").slice(0,16)},window.scrollTo({top:0,behavior:"smooth"})},y=()=>{o.value=!1,v.value=null,a.value={desc:"",amount:29,status:"paid",date:new Date().toISOString().slice(0,16)}},B=async l=>{if(!confirm("Are you sure you want to delete this record?"))return;await O(l)&&(d.value={text:"Deleted successfully",type:"success"},b())},D=async()=>{m.value=!0;const l={sub_table:"billing",date:a.value.date.replace("T"," ")+":00",desc:a.value.desc,amount:parseFloat(a.value.amount),status:a.value.status};let e=!1;if(o.value)e=await z(v.value,l);else{const s=`https://api.nocodebackend.com/create/${S}?Instance=${A}`;e=(await fetch(s,{method:"POST",headers:{accept:"application/json",Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify(l)})).ok}e?(d.value={text:o.value?"Updated!":"Added!",type:"success"},y(),b()):d.value={text:"Error occurred",type:"error"},m.value=!1};return(l,e)=>(r(),i("div",F,[c(T),t("main",j,[c(I,{title:"Billing Administration"}),t("section",q,[c(x,{style:{"max-width":"800px",margin:"0 auto",width:"100%"}},{default:w(()=>[t("div",J,[t("h2",K,n(o.value?"Edit Record":"Add New Record"),1),o.value?(r(),i("button",{key:0,class:"card-btn",onClick:y},"Cancel Edit")):g("",!0)]),t("form",{onSubmit:R(D,["prevent"]),class:"settings-section"},[t("div",G,[t("div",W,[e[4]||(e[4]=t("label",null,"Description",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.desc=s),type:"text",class:"form-input",required:""},null,512),[[f,a.value.desc]])]),t("div",Q,[e[5]||(e[5]=t("label",null,"Amount ($)",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.amount=s),type:"number",step:"0.01",class:"form-input",required:""},null,512),[[f,a.value.amount]])]),t("div",X,[e[7]||(e[7]=t("label",null,"Status",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.status=s),class:"settings-select",style:{width:"100%"}},[...e[6]||(e[6]=[t("option",{value:"paid"},"Paid",-1),t("option",{value:"pending"},"Pending",-1)])],512),[[V,a.value.status]])]),t("div",Y,[e[8]||(e[8]=t("label",null,"Date & Time",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.date=s),type:"datetime-local",class:"form-input",required:""},null,512),[[f,a.value.date]])])]),d.value.text?(r(),i("div",{key:0,style:L({color:d.value.type==="success"?"var(--success)":"var(--danger)",marginTop:"15px"})},n(d.value.text),5)):g("",!0),t("div",Z,[t("button",{type:"submit",class:"btn btn-primary",disabled:m.value},n(o.value?"Update Record":"Create Record"),9,tt)])],32)]),_:1})]),t("section",et,[c(x,null,{default:w(()=>[e[13]||(e[13]=t("div",{class:"card-header"},[t("h2",{class:"card-title"},"Database Records"),t("p",{class:"card-subtitle"},"Live records from nocodebackend.com")],-1)),t("div",st,[t("table",at,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Description"),t("th",null,"Amount"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[(r(!0),i(M,null,$(h.value,s=>(r(),i("tr",{key:s.id},[t("td",null,n(s.date),1),t("td",null,n(s.desc),1),t("td",null,[t("span",lt,n(s.amount),1)]),t("td",null,[t("span",{class:U(["status-badge",s.status.toLowerCase()==="paid"?"completed":"pending"])},n(s.status),3)]),t("td",null,[t("div",ot,[t("button",{class:"card-btn",title:"Edit",onClick:_=>C(s)},[...e[9]||(e[9]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,nt),t("button",{class:"card-btn",title:"Delete",onClick:_=>B(s.id)},[...e[10]||(e[10]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"var(--danger)","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,dt)])])]))),128)),h.value.length===0?(r(),i("tr",it,[...e[11]||(e[11]=[t("td",{colspan:"5",style:{"text-align":"center",padding:"40px",color:"var(--text-muted)"}},"No database records found.",-1)])])):g("",!0)])])])]),_:1})])])]))}},pt=E(rt,[["__scopeId","data-v-0398c865"]]);export{pt as default};
